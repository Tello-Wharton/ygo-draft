<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>YGO Draft</title>
  
  <script src="./js/vue/vue.js"></script>
  <script src="./js/networking/libs/socket.io.js"></script>


  <script src="https://cdn.jsdelivr.net/npm/p5@1.1.9/lib/p5.js"></script>
  
  <script src="./js/pack-opening.js"></script>
  <script src="./js/vue-page-main.js"></script>
  <script src="./js/pack-opener.js"></script>
  <script src="./js/create-server-page.js" type="module"></script>
  <script src="./js/connect-to-server-page.js" type="module"></script>

  <link rel="stylesheet" type="text/css" href="./css/pack-opener.css">
</head>
<body>

<main>
  <div id="ygo-draft">

    <h1>YGO Draft</h1>


    <button @click="goToHome">Home</button>
    <button @click="goToCreateServer">Create Server</button>
    <button @click="goToJoinServer">Connect to Server</button>
    <button @click="goToPackOpener">Pack Opener</button>
    

    <p>{{page}}</p>

    <pack-opener v-if="page === 'pack-opener'"></pack-opener>
    <create-server v-else-if="page === 'create-server'"></create-server>
    <join-server v-else-if="page === 'join-server'"></join-server>

  </div>
</main>


<script type="text/x-template" id="pack-opener">
    <div>
      <button @click="openPack">Open Pack!</button>

      <ul class="flashcard-list">
        <li v-on:click="toggleCard(card)" v-for="card in cards">
          <transition name="flip">
            <div v-bind:key="card.flipped" class="card">
                <img style="width: 250px;" v-bind:src="card.flipped ? card.image : '../card_imgs/cd_back_clean.png'"/>
            </div>
          </transition>
        </li>
      </ul>
    </div>
</script>

<script type="text/x-template" id="create-server">
  <div>
    
    Select the local port that you wish to start a game server along with the name that you wish to assign this server.
    <form>
        <div>
            <label for="serverPort">Port:</label>
            <input id="serverPort" v-model="serverPort" type="text">
        </div>

        <div>
            <label for="serverName">Server Name</label>
            <input id="serverName" v-model="serverName" type="text">
        </div>

        <div>
            <button v-on:click="createServer($event)">Create Server</button>
        </div>
    </form>

    <h3>Currently connected clients:</h3>
    <button v-on:click="getCurrentlyConnectedClients($event)">Refresh Currently Connected Clients</button>

    <li v-for="client in connectedClients">
        <div class="">
            {{client}}
        </div>

    </li>
  </div>

</script>

<script type="text/x-template" id="join-server">
  <div>
    <h1>Connect to a Server</h1>


    <div>
        Enter the server connection details that you wish to connect to below:
        <form>
            <div>
                <label for="serverUri">server address:</label>
                <input id="serverUri" v-model="serverUri" type="text">
            </div>

            <div>
                <button v-on:click="connectToServer($event)">Connect To Server</button>
            </div>
        </form>
    </div>

  </div>

</script>


</body>
</html>